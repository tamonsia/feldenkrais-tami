var app=angular.module('Mainapp',['ui.bootstrap','ngRoute']).directive('autoHeight',['addResizeEvent','isLargeWindow',function(addResizeEvent,isLargeWindow){return{restrict:'AE',replace:true,transclude:true,scope:{additionalMargin:"=",ids:"="},template:function(element,attrs){var classes=attrs.class||"";return'<div id="contact" class="textBlock leftTextBlock '+classes+'" ng-transclude><\div>';},link:function(scope,element,attr){var find='\'';var re=new RegExp(find,'g');var ids=attr.ids.replace(re,'"');var idArray=JSON.parse(ids);var changeSize=function(){var h=parseInt(attr.additionalMargin)||0;idArray.forEach(function(id){h+=$('#'+id).outerHeight(false);});if(isLargeWindow()){element.css({height:h+'px',});}else{element.css({height:'auto',});}}
changeSize();addResizeEvent(changeSize);window.onorientationchange=changeSize;},};}]);;app.controller('MainControler',function($scope,$rootScope,$timeout,EnlargeArea,$compile){$(function(){$('#mobileMenu').slicknav({label:'',closeOnClick:true});$compile($('.slicknav_menu'))($scope);});$scope.enlargeContactArea=EnlargeArea;$scope.isRouteLoading=true;$rootScope.$on('$routeChangeStart',function(){$scope.isRouteLoading=true;$scope.isFinishedWithDelay=false;});$scope.isThisPage=function(ending){return window.location.hash==ending;}
$rootScope.$on('$routeChangeSuccess',function(event,toState,toParams,fromState,fromParams){$scope.isRouteLoading=false;$timeout(function(){$scope.isFinishedWithDelay=true;if(!$scope.$$phase)$scope.$apply();},600);});});app.controller('homeCtrl',['$scope','$rootScope','$timeout','$templateCache','isIos',function($scope,$rootScope,$timeout,$templateCache,isIos){$scope.isIos=isIos;$("#owl-carouselDemo").owlCarousel({margin:10,loop:true,lazyLoad:false,autoplayHoverPause:true,autoplaySpeed:1000,autoplay:1000,items:4,responsive:{0:{items:3},981:{items:4}}});}]);app.controller('fel-sessionsCtrl',['$scope','$rootScope','$timeout','$templateCache','addResizeEvent','isLargeWindow',function($scope,$rootScope,$timeout,$templateCache,addResizeEvent,isLargeWindow){$scope.videoFinshedLoading=false;$scope.islarge=[];var largeHight=178;var readMoreheight=Math.max($('#readMore2').position().top,$('#readMore1').position().top);var textHeight=Math.max($('#readMore2').height(),$('#readMore1').height());var height=readMoreheight+textHeight;$scope.islarge[1]=height;$scope.islarge[2]=height;$scope.initialHeight=height;addResizeEvent(function(){if(window.location.hash!='#/feldenkrais-sessions'){return;}readMoreheight=Math.max($('#readMore2').position().top,$('#readMore1').position().top);textHeight=Math.max($('#readMore2').height(),$('#readMore1').height());height=readMoreheight+textHeight;if($scope.islarge[1]==$scope.initialHeight){if($scope.islarge[2]==$scope.initialHeight){changeHeight(1,height);changeHeight(2,height);}else{readMoreheight=$('#readMore1').position().top;height=readMoreheight+textHeight;changeHeight(1,height);correctHeight(2);}$scope.initialHeight=height;}else{correctHeight(1);if($scope.islarge[2]==$scope.initialHeight){readMoreheight=$('#readMore2').position().top;height=readMoreheight+textHeight;changeHeight(2,height);$scope.initialHeight=height;}else{correctHeight(2);}};$scope.$apply();});var correctHeight=function(i){if(!isLargeWindow()){$scope.islarge[i]='auto';}else{$scope.islarge[i]=246;}}
var addGrowingClass=function(){$('#single-feldenkrais').addClass('growing');$('#group-feldenkrais').addClass('growing');}
var changeHeight=function(place,h){var id;if(place==1)id='single-feldenkrais';else{id='group-feldenkrais';}$('#'+id).removeClass('growing');$('#'+id).height(h);$scope.islarge[place]=h;$scope.$apply();setTimeout(function(){$('#'+id).addClass('growing');},500);}
$scope.ReadMore=function(pic,px){var id='group-feldenkrais';if(pic==1)id='single-feldenkrais';else{id='group-feldenkrais';}if(isLargeWindow()){$scope.islarge[pic]=px;}else{$scope.islarge[pic]='auto';;}};}]);app.controller('aboutControler',['$scope','$rootScope','$timeout','EnlargeArea','addResizeEvent',function($scope,$rootScope,$timeout,EnlargeArea,addResizeEvent){$rootScope.enlargeFeldenkraisMethod=false;var largeScreenSize=992;$scope.getWidth=function(){return $(window).width();};$scope.$watch($scope.getWidth,function(newValue,oldValue){$scope.isLargeScreen=newValue>=largeScreenSize;});addResizeEvent(function(){$scope.$apply();});$scope.EnlargeArea=EnlargeArea;}]);